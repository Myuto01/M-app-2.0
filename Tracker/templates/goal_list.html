{% extends 'base.html' %}
{% block title %}Goal List{% endblock %}
{% block content %}
<style>
.status-circle {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: #ccc; /* Default color (grey) */
  margin-right: 10px;
}

.status-circle.achieved {
  background-color: #8FBC8F; /* Light green color when achieved */
}

.goal-details {
  flex-grow: 1;
}

.card {
  display: flex;
  align-items: center;
  width: 500px; /* Adjust the width as needed */
  margin: 20px auto; /* Center the card */
  padding: 20px;
  margin-left: 0;
  background-color: #ffffff; /* White background */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: Add a box shadow for a card-like effect */
  border-radius: 8px; /* Optional: Add border-radius for rounded corners */
}

ul {
  list-style-type: none;
  padding: 0;
}

ul li {
  margin-bottom: 10px;
}

.goal-title{
  font-size: 30px;
}
.btn-container{
display: flex;
flex-direction: row-reverse;
gap: 15px;
margin-left: 70%;
font-size: 20px;
}

a {
  text-decoration: none;
  color: #333; /* Link color */
}


a:hover {
  color: #007bff; /* Link color on hover */
}


button {
    position: relative;
    margin-top: 0;
    margin-left: 50%;
    width: 70px;
    height: 70px;
    font-size: 30px;
    border-radius: 50%;
    background-color: orangered;
}

#progressChart {
    width: 80px; /* Set the desired width */
    height: 80px; /* Set the desired height */
    max-width: 80%; /* Ensure it doesn't exceed the container width */
    max-height: 80%; /* Ensure it doesn't exceed the container height */
    display: block; /* Remove any extra space below the canvas */
}


.container{
    display: flex;
    flex-direction: row;

}


@media screen and (max-width: 768px){
    .container {
      flex-direction: column;
      margin-top: 10px;
  }

  .card {
    display: flex;
    align-items: center;
    width: 360px;
    margin: 20px auto;
    padding: 20px;
    margin-left: 0;
    background-color: #ffffff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
}

#progressChart {
    width: 50px; /* Set the desired width */
    height: 50px; /* Set the desired height */
    max-width: 50%; /* Ensure it doesn't exceed the container width */
    max-height: 50%; /* Ensure it doesn't exceed the container height */
    display: block; /* Remove any extra space below the canvas */
    margin-left: 60px;
}

button {
    position: relative;
    margin-top: 130px;
    margin-left: 50%;
    width: 70px;
    height: 70px;
    font-size: 30px;
    border-radius: 50%;
    background-color: orangered;
}
}
    

</style>
    <h1>Your Goals</h1>
    <a href="{% url 'create-goal' %}"><button type="button"><i class="fa-solid fa-plus"></i></button></a>
<div class="container">
        <ul>
            {% for goal in goals %}
            <div class="card">
              <div class="status-circle {% if goal.is_achieved %}achieved{% endif %}"></div>
              <div class="goal-details">
                <li><a class="goal-title" href="{% url 'goal-detail' goal.id %}"><b>{{ goal.title }}</b></a></li>
                {{ goal.target_date }}
              </div>
              <div class="btn-container">
                <a class="delete" href="{% url 'delete-goal' goal.id  %}" onclick="confirmDelete('{{ goal.id }}')">
                  <i class="fa fa-trash" aria-hidden="true" style="color: red;"></i>
                </a>
                <a href="{% url 'edit-goal' goal.id %}">
                  <i class="fa fa-edit" aria-hidden="true" style="color: blue;"></i>
                </a>
              </div>
            </div>
          {% endfor %}
            
        </ul>
       
       
       
       <canvas id="progressChart"></canvas>
       <script>

        function confirmDelete(goalId) {
            var confirmed = confirm('Are you sure you want to delete this note?');

            if (!confirmed) {
                event.preventDefault(); // Prevent the default action (i.e., following the link)
            }
        }

        // Sample data, replace this with your actual data
        var progressData = {
          labels: ["Week 1", "Week 2", "Week 3", "Week 4"],
          datasets: [{
            label: "Achievement Progress",
            borderColor: "rgba(75, 192, 192, 1)",
            data: [20, 40, 60, 80] // Sample progress values
          }]
        };
    
        var ctx = document.getElementById("progressChart").getContext("2d");
        var myLineChart = new Chart(ctx, {
          type: 'pie',
          data: progressData
        });
      </script>
</div>
{% endblock %}
